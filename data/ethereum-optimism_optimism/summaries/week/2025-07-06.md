# ethereum-optimism/optimism Weekly Report (Jul 6 - 12, 2025)

## üöÄ Highlights
This week was characterized by a strong focus on enhancing the stability and reliability of the OP Stack. Critical deadlock bugs were resolved in both `op-node` and `op-supervisor`, significantly improving core protocol resilience. The testing infrastructure received a major overhaul, with numerous tests being validated, fixed, and re-enabled to ensure comprehensive coverage and prevent regressions. Key feature work included the successful integration of the Standard Validator into the Optimism Contracts Manager (OPCM), streamlining contract management, and an update to `op-geth` to prepare for the Holocene network activation.

## üõ†Ô∏è Key Developments
Work this week centered on hardening the existing stack through bug fixes, refactoring, and extensive testing improvements.

**Protocol Stability and Reliability**
- Critical deadlock and race condition fixes were merged to improve system stability. A fix in `op-node` ensures proper mutex unlocking ([#16617]), while `op-supervisor` was updated to remove redundant locks and resolve a deadlock that caused event congestion ([#16642]).
- The `op-node` was also improved to correctly delete the safe head database when an Execution Layer sync is triggered, enhancing synchronization reliability ([#16644]).

**Testing Infrastructure and Validation**
- A significant effort was made to improve test quality and coverage. This included re-enabling the `faultproofs` test in CI ([#16398]), reducing flakiness in withdrawal proofs tests ([#16628]), and achieving validation script compliance for tests in the `/L2` ([#16607]), `/universal` ([#16610]), and other legacy folders ([#16613]).
- New acceptance tests were added to verify safe head database behavior during EL state deletion ([#16627]).
- The development environment was also improved by fixing the Kurtosis devnet's reverse proxy setup ([#16638]) and correcting the challenger address in `op-e2e` devnet deploys ([#16671]).

**Contracts and OPCM**
- The Standard Validator was successfully integrated into the Optimism Contracts Manager (OPCM) ([#16237]). This refactor aligns the validator with existing OPCM patterns, improving the modularity and maintainability of the contract deployment system.

**`op-supervisor` and Interop Enhancements**
- The `op-supervisor` saw several improvements. Its rewinder mechanism was refactored for simplicity ([#16556]), and its RPC interface was updated to map internal errors to standard RPC error codes for better client-side handling ([#16652]).
- In a move towards API consistency, the `interop_blockRefByNumber` API was removed and consolidated into `interop_L2BlockRefByNumber` across `op-supervisor` and `op-node` ([#16636]).

**Tooling and Developer Experience**
- A new Gnosis Safe client was added to `op-service`, providing robust transaction sending capabilities with built-in gas estimation and retries ([#16629]).
- `op-program` received a new script for building canonized prestates, improving the prestate generation process ([#16670]).
- The Smart Contract Style Guide was updated with new test conventions and validation workflows ([#16614]), and `op-service` gained new `logfmtms` and `jsonms` log formats for better monitoring ([#16645]).

**Node and Geth Updates**
- `op-geth` was updated to include the latest SCR changes and the swell-mainnet Holocene activation time, keeping it aligned with network upgrades ([#16655]).

## üêõ Issues & Triage

**Closed Issues**
- Several critical stability issues in `op-supervisor` related to event overflow and potential deadlocks were resolved ([#16335], [#16603]).
- A series of issues related to a "trivial-interop" mode for `op-node` (running without a supervisor) were closed, as this direction is no longer a priority ([#16519], [#16520], [#16521]).
- The successful integration of the Standard Validator closed out its corresponding OPCM task ([#15799]), and the `op-supervisor` RPC was brought into compliance with the error-code specification ([#15771]).
- An issue preventing L1 network access in the Kurtosis devnet was also resolved ([#16127]).

**New & Active Issues**
- A new issue was opened to address the authentication strategy for `op-interop-mon` and `op-supervisor`, particularly for admin APIs like `admin_SetFailsafeEnabled` ([#16672]).
- A code duplication was identified in the `op-batcher`'s `checkTxpool` function, prompting a cleanup effort ([#16677]).
- A limitation in the Forge test linter was reported, as it cannot properly process tests for Solidity libraries ([#16662]).
- Ongoing discussions continue around abnormal CPU usage in `op-geth` ([#613]), with users providing `pprof` data for analysis. Other active threads include addressing RV Audit findings ([#16548]) and finalizing OPCM changes for the Fault Proof creator contract ([#15789]).

## üí¨ Community & Collaboration
This week highlighted a healthy and responsive development process. The quick identification and acknowledgment of potential code duplication in `op-batcher` ([#16677]) demonstrated a positive feedback loop between contributors. The team also showed clear strategic decision-making by closing several issues related to a deprioritized feature, allowing focus to shift to more pressing stability and testing enhancements. The collaborative debugging on the long-standing `op-geth` CPU usage issue ([#613]) continues, with community members actively providing diagnostic data to help pinpoint the root cause.