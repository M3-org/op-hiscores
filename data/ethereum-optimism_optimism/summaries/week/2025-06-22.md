# ethereum-optimism/optimism Weekly Report (Jun 22 - 28, 2025)

## üöÄ Highlights
This week was characterized by a significant push to enhance the robustness and reliability of the OP Stack, with a strong focus on testing infrastructure and core component stability. Development efforts centered on expanding the acceptance testing framework, particularly for interop and flashblocks scenarios, and advancing the `op-supervisor`'s capabilities for handling resets and safety modes. Critical bug fixes were deployed for `op-deployer`, improving the reliability of the Superchain deployment process. Meanwhile, active investigation continues into performance issues like `op-node` goroutine leaks and high CPU usage in `op-geth`, highlighting a dual focus on new feature development and maintaining production stability.

## üõ†Ô∏è Key Developments
Work this week focused on hardening the stack through comprehensive testing, advancing supervisor capabilities, and fixing critical deployment tooling.

- **Testing and Validation Overhaul:** The testing framework saw major enhancements to improve reliability and test coverage. New acceptance tests were added for flashblocks transfers ([#16515](https://github.com/ethereum-optimism/optimism/pull/16515)) and withdrawals with super roots ([#16491](https://github.com/ethereum-optimism/optimism/pull/16491)). The interop testing suite was expanded with an adversarial load test ([#16433](https://github.com/ethereum-optimism/optimism/pull/16433)), a dedicated gate for load tests ([#16564](https://github.com/ethereum-optimism/optimism/pull/16564)), and tests for spamming invalid messages ([#16459](https://github.com/ethereum-optimism/optimism/pull/16459)). A new validation script was introduced to enforce consistent test structure conventions ([#16543](https://github.com/ethereum-optimism/optimism/pull/16543)), with several PRs dedicated to bringing existing tests into compliance ([#16561](https://github.com/ethereum-optimism/optimism/pull/16561), [#16590](https://github.com/ethereum-optimism/optimism/pull/16590), [#16596](https://github.com/ethereum-optimism/optimism/pull/16596)).

- **`op-supervisor` and Interop Advancements:** The `op-supervisor` received significant updates to improve its role in a multi-chain environment. A new API was introduced to support a "Failsafe" mode, allowing for administrative control to halt operations ([#16582](https://github.com/ethereum-optimism/optimism/pull/16582)). The supervisor is now able to determine local unsafe targets and initiate node resets ([#16557](https://github.com/ethereum-optimism/optimism/pull/16557)), and can automatically enable Failsafe mode upon detecting an invalid block ([#16593](https://github.com/ethereum-optimism/optimism/pull/16593)). Internal refactoring improved modularity by separating context from event objects ([#16540](https://github.com/ethereum-optimism/optimism/pull/16540)) and renaming supervisor/node modes for clarity ([#16464](https://github.com/ethereum-optimism/optimism/pull/16464)).

- **Deployment and Tooling Reliability:** The `op-deployer` was made more robust with several critical fixes and new tests. Incorrect artifact hashes for `v4.0.0` and `rc.8` were corrected ([#16562](https://github.com/ethereum-optimism/optimism/pull/16562), [#16565](https://github.com/ethereum-optimism/optimism/pull/16565)), and a fix was implemented to ensure deployment idempotency ([#16567](https://github.com/ethereum-optimism/optimism/pull/16567)). New end-to-end bootstrap tests were added to validate the Superchain deployment process against local and tagged artifacts ([#16575](https://github.com/ethereum-optimism/optimism/pull/16575)).

- **Core Service Enhancements:** Various components received targeted improvements. The `cannon` MIPS emulator's `getrandom` syscall logic was updated for better stability ([#16529](https://github.com/ethereum-optimism/optimism/pull/16529)). The `op-faucet` gained a `faucet_balance` RPC ([#16516](https://github.com/ethereum-optimism/optimism/pull/16516)), and `op-service` was enhanced with safe subtraction functions ([#16539](https://github.com/ethereum-optimism/optimism/pull/16539)). In `op-program`, safeguards were added to prevent typos in custom chain configurations ([#16580](https://github.com/ethereum-optimism/optimism/pull/16580)).

## üêõ Issues & Triage

- **Closed Issues:** Key problems resolved this week include improving CI stability by releasing a test flake report generator ([#16271](https://github.com/ethereum-optimism/optimism/issues/16271)) and deciding against implementing CI SLAs for now ([#16437](https://github.com/ethereum-optimism/optimism/issues/16437)). An investigation into `op-batcher` memory consumption was concluded ([#16537](https://github.com/ethereum-optimism/optimism/issues/16537)), identifying the compressor as a key area for optimization. Several issues related to Superchain operations, task management ([#337](https://github.com/ethereum-optimism/optimism/issues/337), [#342](https://github.com/ethereum-optimism/optimism/issues/342)), and testing enhancements ([#15958](https://github.com/ethereum-optimism/optimism/issues/15958), [#354](https://github.com/ethereum-optimism/optimism/issues/354)) were also closed, marking progress in tooling and test coverage.

- **New & Active Issues:** Several critical new issues were opened, including a request for `op-conductor` alerting on indefinite sequencer halts ([#16558](https://github.com/ethereum-optimism/optimism/issues/16558)) and an investigation into `op-supervisor` event congestion that may point to deadlocks ([#16603](https://github.com/ethereum-optimism/optimism/issues/16603)). A new issue aims to increase observability of `op-batcher` memory usage in CI ([#16572](https://github.com/ethereum-optimism/optimism/issues/16572)).
  
  Ongoing discussions on active issues remain a high priority. Users continue to report `op-node` getting stuck with thousands of goroutines ([#16332](https://github.com/ethereum-optimism/optimism/issues/16332)) and abnormal CPU usage with `op-geth` ([#613](https://github.com/ethereum-optimism/optimism/issues/613)), indicating persistent performance challenges in production environments. Strategic discussions also continued around adopting GoReleaser for the release pipeline ([#16097](https://github.com/ethereum-optimism/optimism/issues/16097)) and refining the supervisor's reset logic ([#16314](https://github.com/ethereum-optimism/optimism/issues/16314), [#16315](https://github.com/ethereum-optimism/optimism/issues/16315)).

## üí¨ Community & Collaboration
This week saw active collaboration between team members and the broader community, particularly in diagnosing production issues. The detailed user reports and `pprof` data provided in the `op-geth` CPU usage issue ([#613](https://github.com/ethereum-optimism/optimism/issues/613)) and the `op-node` stuckness issue ([#16332](https://github.com/ethereum-optimism/optimism/issues/16332)) are prime examples of the community's role in maintaining stack health.

Internally, discussions on issues like `op-batcher` memory optimization ([#16537](https://github.com/ethereum-optimism/optimism/issues/16537)) and the future of the release pipeline ([#16097](https://github.com/ethereum-optimism/optimism/issues/16097)) show a healthy process of technical debate and strategic planning. The large volume of interconnected work on the testing framework and `op-supervisor` suggests tight coordination across different areas of the core development team.