# ethereum-optimism/optimism Daily Update (Oct 21, 2025)

## OVERVIEW
Today's development focused on enhancing smart contract security with IERC165 support for SaferSafes, improving the `op-node`'s gossip validation for Jovian blocks, and refining CI/CD processes for better stability and cache management. Significant progress was also made in dispute game contract management and testing.

## KEY TECHNICAL DEVELOPMENTS

### Smart Contract Security and Upgrades
*   **Enhanced SaferSafes Security:** Added IERC165 support to SaferSafes and TimelockGuard, improving contract introspection and compatibility ([#17864](https://github.com/ethereum-optimism/optimism/pull/17864)). Security was further bolstered by requiring `msgSender` to be an owner of the Safe for transaction execution ([#17900](https://github.com/ethereum-optimism/optimism/pull/17900)).
*   **Gnosis Safe Library Upgrade:** Upgraded Gnosis Safe libraries to version 1.4.1, addressing compatibility issues and enabling testing with current Safe deployments ([#17962](https://github.com/ethereum-optimism/optimism/pull/17962)).
*   **Dispute Game Contract Management:** Implemented support for V2 contracts in `addGameType` within the OPContractsManager ([#17782](https://github.com/ethereum-optimism/optimism/pull/17782)) and updated the upgrade method for `disputegame-v2` to support a creator pattern ([#17874](https://github.com/ethereum-optimism/optimism/pull/17874)).

### Node and Protocol Improvements
*   **Jovian Block Validation Fix:** Corrected gossip validation for Jovian blocks in `op-node` to properly handle non-zero `blobGasUsed` values ([#17940](https://github.com/ethereum-optimism/optimism/pull/17940)).
*   **GasPriceOracle Refinement:** Removed saturating math from the `getOperatorFee` function in `GasPriceOracle` for both Isthmus and Jovian, addressing potential overflow issues ([#17913](https://github.com/ethereum-optimism/optimism/pull/17913)).
*   **Beacon Client Robustness:** Improved the `op-service` beacon client for increased reliability ([#17866](https://github.com/ethereum-optimism/optimism/pull/17866)).

### CI/CD and Testing Enhancements
*   **CI/CD Stability and Cache Management:** Fixed incorrect `console.log` format strings in the `ManageDrippie` script ([#17717](https://github.com/ethereum-optimism/optimism/pull/17717)), updated cache paths and ensured cache saving in CircleCI ([#17968](https://github.com/ethereum-optimism/optimism/pull/17968)), and cleaned up `op-deployer` caches to prevent disk usage issues ([#17959](https://github.com/ethereum-optimism/optimism/pull/17959)).
*   **Improved Test Suite:** Enhanced the SaferSafes test suite by converting tests to fuzz tests and adding comprehensive coverage for `checkAfterExecution` ([#17949](https://github.com/ethereum-optimism/optimism/pull/17949)). Also, removed dead code from `op-acceptance-tests` related to operator fee balance reading ([#17937](https://github.com/ethereum-optimism/optimism/pull/17937)).

## NEWLY OPENED PULL REQUESTS
*   [#17969](https://github.com/ethereum-optimism/optimism/pull/17969) chore(op-acceptance-tests): flake-shake; test promotions: This PR promotes stable tests from the `flake-shake` gate based on stability criteria.
*   [#17961](https://github.com/ethereum-optimism/optimism/pull/17961) derive: Drop span batch with singular batch extraction error: This PR addresses an issue where span batches with singular batch extraction errors are not properly handled.
*   [#17957](https://github.com/ethereum-optimism/optimism/pull/17957) chore: update contract codeowners so 2 reviewer rule doesn't apply when only markdown files are changed: This PR updates the CODEOWNERS file to relax the 2-reviewer rule for changes solely affecting markdown files within the contracts directory.

## CLOSED ISSUES

### Dispute Game V2 Integration
*   The integration of V2 dispute game implementations into the `OPContractsManager` has been completed, allowing for feature-flagged use in both `upgrade` ([#17258](https://github.com/ethereum-optimism/optimism/issues/17258)) and `addGameType` ([#17260](https://github.com/ethereum-optimism/optimism/issues/17260)) functions. This also included updates to `op-challenger` and `dispute-mon` to correctly pull oracle data for V2 game contracts ([#17810](https://github.com/ethereum-optimism/optimism/issues/17810)).

### Operator Fee and GasPriceOracle Improvements
*   Issues related to the `GasPriceOracle`'s `operatorFee` calculation, specifically concerning saturating math and edge cases, have been addressed and closed ([#17887](https://github.com/ethereum-optimism/optimism/issues/17887), [#17888](https://github.com/ethereum-optimism/optimism/issues/17888)).

### Testing and Infrastructure Enhancements
*   An issue regarding `op-acceptance-tests` interop load test metrics integration has been closed ([#16352](https://github.com/ethereum-optimism/optimism/issues/16352)). Additionally, the task for `snapman` to create Reth snapshots of full nodes has been completed ([#17684](https://github.com/ethereum-optimism/optimism/issues/17684)).

## NEW ISSUES

### Testing and CI/CD Stability
*   A flaky test, `TestChannelManager_Memory/ShadowCompressor_Zlib_SingularBatch`, has been identified, indicating potential instability in channel manager memory handling ([#17966](https://github.com/ethereum-optimism/optimism/issues/17966)).

### Jovian Hardfork Cleanup
*   With the scope of the Jovian hardfork settled, there is a new issue to remove the associated feature toggles from the codebase ([#17960](https://github.com/ethereum-optimism/optimism/issues/17960)).

### Build Environment Setup
*   An installation error with `mise` has been reported, where the version prefix "v" causes issues during URL formatting, preventing proper dependency installation ([#17963](https://github.com/ethereum-optimism/optimism/issues/17963)).

## ACTIVE ISSUES

### Fusaka Hardfork Preparation
*   **op-geth: prepare for Fusaka** ([#682](https://github.com/ethereum-optimism/optimism/issues/682)): The `op-geth` upstream merge to Fusaka release for Sepolia has been achieved. The current discussion revolves around whether the Mainnet preparation is complete, with `geoknee` confirming it's done for Sepolia but not yet for Mainnet, and `mslipper` inquiring about its overall completion.
*   **fusaka-defense: write superchain-ops task for updating the absolute prestate** ([#1206](https://github.com/ethereum-optimism/optimism/issues/1206)): The task to update the absolute prestate has been completed and executed on Sepolia. `geoknee` is asking if the ticket should remain open to track the Mainnet task, following up on previous discussions about using a template for the task and the estimated Fusaka live date.

### Observability in Sysgo
*   **feat(tests): enable observability/monitoring in sysgo** ([#17941](https://github.com/ethereum-optimism/optimism/issues/17941)): The rust protocol team is seeking to add observability into `sysgo`-held devnets for better monitoring. `theochap` suggests this might be a duplicate of [#16352](https://github.com/ethereum-optimism/optimism/issues/16352), which was closed today.