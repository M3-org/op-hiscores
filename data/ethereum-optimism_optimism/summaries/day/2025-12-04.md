# ethereum-optimism/optimism Daily Update (Dec 4, 2025)
## OVERVIEW 
Today's development focused on significant contract improvements, including breaking out OPCMv2 utilities and enhancing test coverage for `AddressAliasHelper`. Critical CI workflow fixes were also implemented, alongside updates to blob fetching logic.

## KEY TECHNICAL DEVELOPMENTS

### Contract Optimization and Testing
- **OPContractsManagerV2 Refactoring**: The `OPContractsManagerV2` utilities have been broken out into a separate `OPContractsManagerUtils` contract, significantly reducing the code size of OPCMv2 and improving modularity ([#18454](https://github.com/ethereum-optimism/optimism/pull/18454)).
- **Enhanced Contract Test Coverage**: Added dedicated test coverage for `AddressAliasHelper` and fixed a flaky test in `SystemConfig`, improving the robustness of contract testing ([#18360](https://github.com/ethereum-optimism/optimism/pull/18360)).

### CI/CD and Blob Handling Improvements
- **CI Workflow Fixes**: Updated the `docker-bake.yaml` workflow to resolve bash history expansion issues caused by special characters in build metadata, ensuring more reliable CI processes ([#18498](https://github.com/ethereum-optimism/optimism/pull/18498)).
- **Duplicate Blob Hash Detection**: The blob fetching logic has been updated to correctly handle scenarios where multiple blobs with identical content but different indices are requested, improving data integrity and processing ([#18492](https://github.com/ethereum-optimism/optimism/pull/18492)).

## NEWLY OPENED PULL REQUESTS
- [#18509](https://github.com/ethereum-optimism/optimism/pull/18509) `test: use a custom Test contract for makeAddr` proposes using a custom test contract for address generation.
- [#18506](https://github.com/ethereum-optimism/optimism/pull/18506) `op-conductor: fixes flashblocks handler leaks` aims to address memory leaks in the `op-conductor`'s flashblocks handler.
- [#18504](https://github.com/ethereum-optimism/optimism/pull/18504) `[WIP] Big refactor to move to ComponentIDs` is a work-in-progress for a major refactor to introduce ComponentIDs.
- [#18501](https://github.com/ethereum-optimism/optimism/pull/18501) `ci: reduce permissions of fork builds & fix tag releases` suggests reducing permissions for fork builds and fixing tag releases in CI.
- [#18500](https://github.com/ethereum-optimism/optimism/pull/18500) `op-node: Light CL: Follow Source using EL or CL` proposes an `op-node` enhancement for Light CL to follow sources using either EL or CL.
- [#18499](https://github.com/ethereum-optimism/optimism/pull/18499) `op-service: respect configured timeouts in RateLimitingClient` aims to ensure the `RateLimitingClient` respects configured timeouts.
- [#18496](https://github.com/ethereum-optimism/optimism/pull/18496) `falco/debug pr 2` and [#18495](https://github.com/ethereum-optimism/optimism/pull/18495) `falco/troubleshoot joe pr 1` are related to Falco debugging and troubleshooting.
- [#18491](https://github.com/ethereum-optimism/optimism/pull/18491) `op-node: Detect duplicate blobs being returned` focuses on detecting duplicate blobs returned by the `op-node`.

## CLOSED ISSUES

### Documentation and Node Sync Issues
- **Node Operator Documentation**: An issue regarding the `/node-operators/reference/consensus-layer-sync` documentation was closed, with a note to reopen if more context is provided ([#1895](https://github.com/ethereum-optimism/optimism/issues/1895)).

## NEW ISSUES

### Kona-SP1 Enhancements and Refinements
- **Rollup Config Hash Update**: The `kona-sp1` program needs to replace its rollup config hash input with an L2 chain ID ([#18493](https://github.com/ethereum-optimism/optimism/issues/18493)).
- **Logic Deduplication**: There's a need to deduplicate logic in `kona-sp1` by replacing implementations with those from `kona-proof` in `advance_to_target` and other functions ([#18494](https://github.com/ethereum-optimism/optimism/issues/18494)).
- **L1 Head Offset Investigation**: An investigation is required for the `kona-sp1`'s `calculate_safe_l1_head` function to understand the necessity of an L1 head offset beyond the batch posting block ([#18503](https://github.com/ethereum-optimism/optimism/issues/18503)).

### System Configuration and Performance
- **SystemConfig Override Removal**: The allowance for `SystemConfig::isCustomGasToken` override in OPCMv2 needs to be removed after the U18 shipment ([#18502](https://github.com/ethereum-optimism/optimism/issues/18502)).
- **EIP-2935 Action Test**: An action test is needed to assert that EIP-2935 is used to accelerate canonical block queries, which is crucial for the interop program ([#18505](https://github.com/ethereum-optimism/optimism/issues/18505)).

### Batcher Improvements
- **Post-Holocene Ordering in Concurrent Mode**: The `op-batcher` needs to handle post-Holocene ordering correctly when operating in concurrent mode ([#18507](https://github.com/ethereum-optimism/optimism/issues/18507)).
- **Configurable Frame Size and Multi-Frame Transactions**: A feature request for `op-batcher` to allow configurable frame sizes and support multi-frame transactions ([#18508](https://github.com/ethereum-optimism/optimism/issues/18508)).

## ACTIVE ISSUES

### op-node stuck in EL sync mode after restart
The issue [#18468](https://github.com/ethereum-optimism/optimism/issues/18468) describes `op-node` getting stuck in an initialization loop with `el_syncing=true` when configured with `--syncmode=execution-layer` and restarted after syncing with Reth. This is blocking Base Mainnet nodes. A temporary workaround suggested by `louisliu2048` is to change the sync mode from EL sync to CL sync and restart the `op-node`. `dalechyn` confirmed experiencing the same issue and logs.