# ethereum-optimism/op-geth Daily Update (Jun 25, 2025)
## OVERVIEW 
June 25, 2025, saw significant progress in addressing critical issues, particularly around flashblocks enablement and memory optimization for the op-batcher. Several long-standing issues were closed, reflecting a focus on stability and performance.

## KEY TECHNICAL DEVELOPMENTS

### Flashblocks Enablement and Acceptance Testing
Efforts culminated in the successful enablement of flashblocks on the eris-0 devnet and the completion of associated acceptance tests. This marks a crucial step towards integrating flashblocks into the broader Optimism ecosystem.
- Flashblocks enabled on eris-0: [#16468](https://github.com/ethereum-optimism/op-geth/issues/16468)
- Flashblocks transaction acceptance tests completed: [#354](https://github.com/ethereum-optimism/op-geth/issues/354)

### Op-Batcher Memory Optimization and Observability
Initial investigations into op-batcher memory consumption identified the compressor as a primary source of high memory usage. Work has begun on optimizing this component and improving observability for better performance monitoring.
- Spike for op-batcher memory optimization: [#16537](https://github.com/ethereum-optimism/op-geth/issues/16537)
- Increased observability for op-batcher memory consumption: [#16572](https://github.com/ethereum-optimism/op-geth/issues/16572)

### Developer Tooling and Documentation Improvements
Improvements were made to developer tools like Supersim, allowing for easier modification of predeploys. A broken link in the documentation was also resolved, enhancing the developer experience.
- Enable user to modify a predeploy: [#393](https://github.com/ethereum-optimism/op-geth/issues/393)
- Broken link in Docs for `L2NativeSuperchainERC20.sol` resolved: [#283](https://github.com/ethereum-optimism/op-geth/issues/283)

## NEWLY OPENED PULL REQUESTS
- A new pull request, [#634](https://github.com/ethereum-optimism/op-geth/pull/634), was opened to introduce a configurable maximum code size feature.

## CLOSED ISSUES

### Flashblocks Integration and Testing Completed
The integration and testing of flashblocks on the eris-0 devnet have been successfully completed, along with the necessary acceptance tests for transactions. This signifies a major milestone in the rollout of flashblocks.
- Flashblocks enabled on eris-0: [#16468](https://github.com/ethereum-optimism/op-geth/issues/16468)
- Flashblocks transaction acceptance tests: [#354](https://github.com/ethereum-optimism/op-geth/issues/354)

### Developer Tooling and Documentation Enhancements
Several issues related to developer tooling and documentation were closed, including enabling users to modify predeploys in Supersim and fixing a broken documentation link.
- Enable a user to modify a predeploy: [#393](https://github.com/ethereum-optimism/op-geth/issues/393)
- Broken link in Docs for `L2NativeSuperchainERC20.sol`: [#283](https://github.com/ethereum-optimism/op-geth/issues/283)

### CI/CD and Script Improvements
A spike exploring CI SLAs was closed, indicating a decision not to implement them for now. Additionally, improvements to the OPCM Migrate Script were noted as completed.
- Spike: CI SLAs: [#16437](https://github.com/ethereum-optimism/op-geth/issues/16437)
- OPCM Migrate Script Improvements: [#16326](https://github.com/ethereum-optimism/op-geth/issues/16326)

## NEW ISSUES

### Transaction Pool Inconsistency
A new issue, [#635](https://github.com/ethereum-optimism/op-geth/issues/635), was opened regarding the `txpool` conditionally including invalid interop transactions, despite existing filters. This suggests a potential bug in how `op-geth` handles certain invalid transactions.

### Op-Batcher Observability
A new issue, [#16572](https://github.com/ethereum-optimism/op-geth/issues/16572), was created to enhance the observability of memory consumption in the `op-batcher`, specifically requesting `pprof` integration in Kurtosis devnet and CI tests for memory measurement.

## ACTIVE ISSUES

### `txpool: invalid interop tx conditionally included` [#635](https://github.com/ethereum-optimism/op-geth/issues/635)
Discussion on this newly opened issue highlights a potential flakiness in the `op-geth` txpool where invalid interop transactions are sometimes included despite filters. @axelKingsley has been unable to reproduce the issue consistently, even with extensive testing and analysis of the `geth` codebase, noting that all transaction submission paths should pass through the ingress filter. @pcw109550 provided detailed reproduction steps and artifacts from CI runs where the flakiness occurred, emphasizing that the issue is intermittent and hard to pin down.

### `spike(op-batcher): optimize memory consumption` [#16537](https://github.com/ethereum-optimism/op-geth/issues/16537)
The discussion focuses on identifying and optimizing memory usage in the `op-batcher`, particularly during L1 congestion. @geoknee successfully used `pprof` to identify the compressor as the primary source of memory consumption when a backlog of channels builds up. They proposed two optimizations: making the shadow compressor use half the memory and eagerly discarding the compressor after channel submission. @sebastianst suggested using a single compressor shared between channels for further memory savings.

### `op-batcher: increase observability of memory consumption` [#16572](https://github.com/ethereum-optimism/op-geth/issues/16572)
This issue, closely related to [#16537](https://github.com/ethereum-optimism/op-geth/issues/16537), aims to improve memory observability for the `op-batcher`. @geoknee noted that existing benchmarks for channel compressors need to be updated to include Brotli compression and run reliably on CI. They also shared local benchmark results showing significant memory allocation per operation for channels, reinforcing the need for optimization. @tynes mentioned that @trianglesphere has also raised performance issues potentially related to memory pressure in this code.

### `withdrawal pathways for superchain output roots` [#821](https://github.com/ethereum-optimism/op-geth/issues/821)
The discussion revolves around updating withdrawal code in `viem` to support the new Superchain output roots structure after the interop hard fork. @fainashalts inquired about testing against an upcoming devnet, given that all devnets were recently renamed. @zainbacchus confirmed that testing against RC Beta is feasible and desirable to iron out kinks before Sepolia.

### `what's the difference between supersim and interop kurtosis devnet?` [#399](https://github.com/ethereum-optimism/op-geth/issues/399)
This issue clarifies the distinction between Supersim and Interop Kurtosis devnet. @fainashalts explained that Supersim is a lighter, local tool built around Anvil, primarily for testing multichain/interop applications and upcoming features, allowing dApp developers to start building before mainnet interop. @zhiqiangxu confirmed that Supersim is mainly for testing dApps rather than the chains themselves, which use Kurtosis.

### `Feature Request: enable logging of user specified contracts` [#411](https://github.com/ethereum-optimism/op-geth/issues/411)
This feature request for Supersim aims to allow users to specify contracts for which they want events logged. @fainashalts expressed approval for the idea, which originated from @hexshire (Wonderland), indicating its utility for debugging and development.