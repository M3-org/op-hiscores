# ethereum-optimism/infra Weekly Report (Jun 22 - 28, 2025)

## üöÄ Highlights
This week was characterized by a significant focus on improving the robustness and developer experience of the infrastructure. A major effort was dedicated to enhancing Superchain-Ops tooling, resulting in the closure of numerous issues related to task simulation, validation, and CI processes. Concurrently, a critical investigation into `op-batcher` memory consumption was initiated, with early analysis pointing towards the data compressor. While progress was made on `op-acceptor` tooling, persistent stability issues with `op-node` goroutines and `op-geth` CPU usage remain active areas of community-driven debugging.

## üõ†Ô∏è Key Developments
The primary completed development this week focused on enhancing the testing framework.

- **`op-acceptor` Testing Enhancements:** The `op-acceptor` was updated to support both `op-devstack` orchestrator modes. This change enables the team to run in-memory tests, streamlining the testing process for acceptance criteria ([#411](https://github.com/ethereum-optimism/infra/pull/411)).

## üêõ Issues & Triage
The week saw a major cleanup of tooling-related issues and the start of a focused investigation into component performance.

- **Closed Issues:**
    - **Superchain-Ops Tooling Overhaul:** A large number of issues were closed to refine the Superchain-Ops tooling. These improvements streamline CI ([#337](https://github.com/ethereum-optimism/infra/issues/337), [#648](https://github.com/ethereum-optimism/infra/issues/648)), enhance task simulation and validation ([#679](https://github.com/ethereum-optimism/infra/issues/679), [#777](https://github.com/ethereum-optimism/infra/issues/777)), simplify nonce management ([#342](https://github.com/ethereum-optimism/infra/issues/342), [#770](https://github.com/ethereum-optimism/infra/issues/770)), and improve the overall architecture ([#636](https://github.com/ethereum-optimism/infra/issues/636)).
    - **CI Stability and Flashblocks:** The investigation into CI flakiness was concluded with stability improvements ([#16271](https://github.com/ethereum-optimism/infra/issues/16271]), and the discussion on CI SLAs was closed without immediate implementation ([#16437](https://github.com/ethereum-optimism/infra/issues/16437)). Work on flashblocks was completed, including acceptance tests and enablement on a devnet ([#354](https://github.com/ethereum-optimism/infra/issues/354), [#16468](https://github.com/ethereum-optimism/infra/issues/16468)).
    - **Documentation and Scripting:** Several documentation issues were resolved, including updates for ERC-20 bridging ([#1508](https://github.com/ethereum-optimism/infra/issues/1508]) and fixes to internal pathing ([#547](https://github.com/ethereum-optimism/infra/issues/547), [#600](https://github.com/ethereum-optimism/infra/issues/600)]). The `OPCM Migrate Script` was also improved ([#16326](https://github.com/ethereum-optimism/infra/issues/16326)).

- **New & Active Issues:**
    - **`op-batcher` Memory Optimization:** A new high-priority investigation was opened to address the `op-batcher`'s memory consumption, especially during L1 congestion ([#16537](https://github.com/ethereum-optimism/infra/issues/16537)). Initial `pprof` analysis suggests the compressor is a major contributor. A related issue was opened to improve observability with more metrics and CI tests for memory usage ([#16572](https://github.com/ethereum-optimism/infra/issues/16572)).
    - **`op-node` Stability and Interop:** The issue of `op-node` v1.13.3 getting stuck with thousands of goroutines remains a critical active problem, with users continuing to report sync failures ([#16332](https://github.com/ethereum-optimism/infra/issues/16332)). Separately, discussions continue on creating a `trivial-interop` mode for `op-node` to simplify operations without a supervisor ([#16519](https://github.com/ethereum-optimism/infra/issues/16519)).
    - **Acceptance Test Migration:** A systematic effort began to port existing acceptance tests to the devstack environment, with new issues created for `TestChainFork`, `TestWithdrawalsRoot`, `TestERC20Bridge`, and others ([#412](https://github.com/ethereum-optimism/infra/issues/412), [#413](https://github.com/ethereum-optimism/infra/issues/413), [#415](https://github.com/ethereum-optimism/infra/issues/415)).
    - **`op-geth` CPU Usage:** Users are actively debugging abnormal CPU usage in `op-geth` ([#613](https://github.com/ethereum-optimism/infra/issues/613)). While some suspect it's a temporary issue from index rebuilding, others report the problem persists, suggesting a potential goroutine leak.

## üí¨ Community & Collaboration
- **Collaborative Debugging:** There is strong collaboration between the community and maintainers on performance issues. Users are actively providing `pprof` profiles and detailed reports for the `op-node` stuck goroutines issue ([#16332](https://github.com/ethereum-optimism/infra/issues/16332)) and the `op-geth` high CPU usage issue ([#613](https://github.com/ethereum-optimism/infra/issues/613)), which is crucial for diagnosing these complex problems.
- **Contributor Engagement:** An issue to reduce noisy output from a multisig function ([#781](https://github.com/ethereum-optimism/infra/issues/781)) attracted interest from multiple community members, demonstrating healthy engagement on well-defined improvement tasks.
- **Tooling Clarification:** A discussion in issue [#399](https://github.com/ethereum-optimism/infra/issues/399) helped clarify the distinct use cases for `supersim` (dApp testing) and the `interop kurtosis devnet` (OP Stack chain testing), improving developer understanding of the available toolsets.