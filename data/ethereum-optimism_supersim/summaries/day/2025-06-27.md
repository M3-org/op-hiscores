# ethereum-optimism/supersim Daily Update (Jun 27, 2025)

## OVERVIEW 
Today's development focused on enhancing `supersim`'s configurability by adding support for custom dependency sets, improving testing flexibility. Discussions on active issues centered on `op-supervisor` reset logic and `op-geth` CPU usage.

## KEY TECHNICAL DEVELOPMENTS

### Enhanced Configuration for Testing
A new feature was added to `supersim` allowing for a configurable dependency set ([#407](https://github.com/ethereum-optimism/supersim/pull/407)). This enables developers to test against chains outside the standard interop set, significantly improving testing flexibility and coverage. This change involved modifications across `config`, `opsimulator`, `orchestrator`, and `supersim` files.

## NEWLY OPENED PULL REQUESTS
No new pull requests were opened today.

## CLOSED ISSUES
No issues were closed today.

## NEW ISSUES

### Investigating `op-supervisor` Event Spikes
A new issue was opened to investigate spikes of `local-derived` and `local-unsafe-received` events in `op-supervisor` ([#16603](https://github.com/ethereum-optimism/supersim/issues/16603)). The team is looking into what triggers this congestion of inflight events, with initial speculation pointing towards `ChainsDB` or `GlobalSyncExec` deadlocks.

### Addressing `op-chain-ops` Broken Dependency
A bug report was filed regarding a broken dependency, `github.com/tyler-smith/go-bip39`, in `op-chain-ops` ([#16612](https://github.com/ethereum-optimism/supersim/issues/16612)). The issue highlights that `op-chain-ops` uses `v1.1.0` of the `tyler-smith` fork, while `cosmos/go-bip39` (a fork of the same) is at `v1.0.0` and has diverged due to refactoring in the original repo.

## ACTIVE ISSUES

### Improving `op-supervisor` Reset Unsafe Target
Discussions on [#16314](https://github.com/ethereum-optimism/supersim/issues/16314) continued, focusing on improving the `op-supervisor`'s reset target search. A comment from today noted that partial implementation has been achieved via a related PR, addressing the supervisor's responsibility for providing correct reset targets. However, it was highlighted that handling pre- and post-Interop scenarios differently is still needed, as the supervisor lacks the logs DB pre-Interop. The issue was later closed, with a note to re-open if necessary, as actionable items were covered.

### Enhancing L1 Origin Validity Handling During Resets
Issue [#16315](https://github.com/ethereum-optimism/supersim/issues/16315) saw an update today, indicating that a L1 origin verifier method now exists at the supervisor side, used for detecting the validity of L1 origin for local unsafe heads. The discussion emphasized that this method and logic should be extended to safe heads to ensure all targets provided by the supervisor are valid.

### Addressing `op-supervisor` Reorg During Reset Behavior
The status of issue [#16321](https://github.com/ethereum-optimism/supersim/issues/16321) was updated today. It was noted that the system now detects the correct local unsafe head, checking the L1 origin at the supervisor side before sending an `interop_reset` request to the `op-node`. However, L1 origin validity for other safety levels is not yet checked, which is tracked in issue [#16315](https://github.com/ethereum-optimism/supersim/issues/16315).

### Investigating Abnormal CPU Usage with `op-geth`
Discussions on [#613](https://github.com/ethereum-optimism/supersim/issues/613) continued, with users reporting high CPU usage with `op-geth` v1.101511.0. A user shared instructions on how to capture `pprof` data to diagnose the issue. Another user suggested that the high CPU usage might be temporary due to log indexing rebuilding, a process that occurs with the backported go-ethereum v1.15.11. However, some users reported that the issue persists even after index upgrades, suggesting a deeper problem.